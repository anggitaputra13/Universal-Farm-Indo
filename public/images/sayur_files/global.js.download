var flexImages=function(){function e(e){function t(e,r,n,i){function o(e){n.maxRows&&g>n.maxRows||n.truncate&&e&&g>1?c[a][0].style.display="none":(c[a][4]&&(c[a][3].setAttribute("src",c[a][4]),c[a][4]=""),c[a][0].style.width=l+"px",c[a][0].style.height=h+"px",c[a][0].style.display="block")}for(var a,l,s,d,f=1,g=1,u=e.clientWidth-2,c=[],m=0,h=n.rowHeight,w=0;w<r.length;w++)if(c.push(r[w]),m+=r[w][2]+n.margin,m>=u){var p=c.length*n.margin;for(f=(u-p)/(m-p),h=Math.ceil(n.rowHeight*f),s=0,l,a=0;a<c.length;a++)l=Math.ceil(c[a][2]*f),s+=l+n.margin,s>u&&(l-=s-u),o();c=[],m=0,g++}for(a=0;a<c.length;a++)l=Math.floor(c[a][2]*f),d=Math.floor(n.rowHeight*f),o(!0);i||u==e.clientWidth||t(e,r,n,!0)}if(document.querySelector){var r={selector:0,container:".item",object:"img",rowHeight:180,maxRows:0,truncate:0};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);for(var i="object"==typeof r.selector?[r.selector]:document.querySelectorAll(r.selector),o=0;o<i.length;o++){var a=i[o],l=a.querySelectorAll(r.container),s=[],d=(new Date).getTime();if(l.length){var f=window.getComputedStyle?getComputedStyle(l[0],null):l[0].currentStyle;r.margin=(parseInt(f.marginLeft)||0)+(parseInt(f.marginRight)||0)+(Math.round(parseFloat(f.borderLeftWidth))||0)+(Math.round(parseFloat(f.borderRightWidth))||0);for(var g=0;g<l.length;g++){var u=l[g],c=parseInt(u.getAttribute("data-w")),m=c*(r.rowHeight/parseInt(u.getAttribute("data-h"))),h=u.querySelector(r.object);s.push([u,c,m,h,h.getAttribute("data-src")])}t(a,s,r);var w=function(){t(a,s,r)};document.addEventListener?(window["flexImages_listener"+d]=w,window.removeEventListener("resize",window["flexImages_listener"+a.getAttribute("data-flex-t")]),delete window["flexImages_listener"+a.getAttribute("data-flex-t")],window.addEventListener("resize",window["flexImages_listener"+d])):a.onresize=w,a.setAttribute("data-flex-t",d)}}}}return e}();!function(){"function"==typeof define&&define.amd?define("flexImages",function(){return flexImages}):"undefined"!=typeof module&&module.exports?module.exports=flexImages:window.flexImages=flexImages}();!function(n){"use strict";function t(n,t){var r=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(r>>16)<<16|65535&r}function r(n,t){return n<<t|n>>>32-t}function e(n,e,o,u,c,f){return t(r(t(t(e,n),t(u,f)),c),o)}function o(n,t,r,o,u,c,f){return e(t&r|~t&o,n,t,u,c,f)}function u(n,t,r,o,u,c,f){return e(t&o|r&~o,n,t,u,c,f)}function c(n,t,r,o,u,c,f){return e(t^r^o,n,t,u,c,f)}function f(n,t,r,o,u,c,f){return e(r^(t|~o),n,t,u,c,f)}function i(n,r){n[r>>5]|=128<<r%32,n[14+(r+64>>>9<<4)]=r;var e,i,a,d,h,l=1732584193,g=-271733879,v=-1732584194,m=271733878;for(e=0;e<n.length;e+=16)i=l,a=g,d=v,h=m,g=f(g=f(g=f(g=f(g=c(g=c(g=c(g=c(g=u(g=u(g=u(g=u(g=o(g=o(g=o(g=o(g,v=o(v,m=o(m,l=o(l,g,v,m,n[e],7,-680876936),g,v,n[e+1],12,-389564586),l,g,n[e+2],17,606105819),m,l,n[e+3],22,-1044525330),v=o(v,m=o(m,l=o(l,g,v,m,n[e+4],7,-176418897),g,v,n[e+5],12,1200080426),l,g,n[e+6],17,-1473231341),m,l,n[e+7],22,-45705983),v=o(v,m=o(m,l=o(l,g,v,m,n[e+8],7,1770035416),g,v,n[e+9],12,-1958414417),l,g,n[e+10],17,-42063),m,l,n[e+11],22,-1990404162),v=o(v,m=o(m,l=o(l,g,v,m,n[e+12],7,1804603682),g,v,n[e+13],12,-40341101),l,g,n[e+14],17,-1502002290),m,l,n[e+15],22,1236535329),v=u(v,m=u(m,l=u(l,g,v,m,n[e+1],5,-165796510),g,v,n[e+6],9,-1069501632),l,g,n[e+11],14,643717713),m,l,n[e],20,-373897302),v=u(v,m=u(m,l=u(l,g,v,m,n[e+5],5,-701558691),g,v,n[e+10],9,38016083),l,g,n[e+15],14,-660478335),m,l,n[e+4],20,-405537848),v=u(v,m=u(m,l=u(l,g,v,m,n[e+9],5,568446438),g,v,n[e+14],9,-1019803690),l,g,n[e+3],14,-187363961),m,l,n[e+8],20,1163531501),v=u(v,m=u(m,l=u(l,g,v,m,n[e+13],5,-1444681467),g,v,n[e+2],9,-51403784),l,g,n[e+7],14,1735328473),m,l,n[e+12],20,-1926607734),v=c(v,m=c(m,l=c(l,g,v,m,n[e+5],4,-378558),g,v,n[e+8],11,-2022574463),l,g,n[e+11],16,1839030562),m,l,n[e+14],23,-35309556),v=c(v,m=c(m,l=c(l,g,v,m,n[e+1],4,-1530992060),g,v,n[e+4],11,1272893353),l,g,n[e+7],16,-155497632),m,l,n[e+10],23,-1094730640),v=c(v,m=c(m,l=c(l,g,v,m,n[e+13],4,681279174),g,v,n[e],11,-358537222),l,g,n[e+3],16,-722521979),m,l,n[e+6],23,76029189),v=c(v,m=c(m,l=c(l,g,v,m,n[e+9],4,-640364487),g,v,n[e+12],11,-421815835),l,g,n[e+15],16,530742520),m,l,n[e+2],23,-995338651),v=f(v,m=f(m,l=f(l,g,v,m,n[e],6,-198630844),g,v,n[e+7],10,1126891415),l,g,n[e+14],15,-1416354905),m,l,n[e+5],21,-57434055),v=f(v,m=f(m,l=f(l,g,v,m,n[e+12],6,1700485571),g,v,n[e+3],10,-1894986606),l,g,n[e+10],15,-1051523),m,l,n[e+1],21,-2054922799),v=f(v,m=f(m,l=f(l,g,v,m,n[e+8],6,1873313359),g,v,n[e+15],10,-30611744),l,g,n[e+6],15,-1560198380),m,l,n[e+13],21,1309151649),v=f(v,m=f(m,l=f(l,g,v,m,n[e+4],6,-145523070),g,v,n[e+11],10,-1120210379),l,g,n[e+2],15,718787259),m,l,n[e+9],21,-343485551),l=t(l,i),g=t(g,a),v=t(v,d),m=t(m,h);return[l,g,v,m]}function a(n){var t,r="",e=32*n.length;for(t=0;t<e;t+=8)r+=String.fromCharCode(n[t>>5]>>>t%32&255);return r}function d(n){var t,r=[];for(r[(n.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var e=8*n.length;for(t=0;t<e;t+=8)r[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return r}function h(n){return a(i(d(n),8*n.length))}function l(n,t){var r,e,o=d(n),u=[],c=[];for(u[15]=c[15]=void 0,o.length>16&&(o=i(o,8*n.length)),r=0;r<16;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=i(u.concat(d(t)),512+8*t.length),a(i(c.concat(e),640))}function g(n){var t,r,e="";for(r=0;r<n.length;r+=1)t=n.charCodeAt(r),e+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return e}function v(n){return unescape(encodeURIComponent(n))}function m(n){return h(v(n))}function p(n){return g(m(n))}function s(n,t){return l(v(n),v(t))}function C(n,t){return g(s(n,t))}function A(n,t,r){return t?r?s(t,n):C(t,n):r?m(n):p(n)}"function"==typeof define&&define.amd?define(function(){return A}):"object"==typeof module&&module.exports?module.exports=A:n.ec=A}(this);(function(){var i={};i.Promise=typeof Promise!=="undefined"?Promise:function(){throw new Error("No native promises and smartcrop.Promise not set.")};i.DEFAULTS={width:0,height:0,aspect:0,cropWidth:0,cropHeight:0,detailWeight:0.2,skinColor:[0.78,0.57,0.44],skinBias:0.01,skinBrightnessMin:0.2,skinBrightnessMax:1,skinThreshold:0.8,skinWeight:1.8,saturationBrightnessMin:0.05,saturationBrightnessMax:0.9,saturationThreshold:0.4,saturationBias:0.2,saturationWeight:0.3,scoreDownSample:8,step:8,scaleStep:0.1,minScale:1,maxScale:1,edgeRadius:0.4,edgeWeight:-20,outsideImportance:-0.5,boostWeight:100,ruleOfThirds:true,prescale:true,imageOperations:null,canvasFactory:b,debug:false};i.crop=function(z,D,F){var B=u({},i.DEFAULTS,D);if(B.aspect){B.width=B.aspect;B.height=1}if(B.imageOperations===null){B.imageOperations=w(B.canvasFactory)}var C=B.imageOperations;var E=1;var A=1;return C.open(z,B.input).then(function(G){if(B.width&&B.height){E=o(G.width/B.width,G.height/B.height);B.cropWidth=~~(B.width*E);B.cropHeight=~~(B.height*E);B.minScale=o(B.maxScale,q(1/E,B.minScale));if(B.prescale!==false){A=1/E/B.minScale;if(A<1){G=C.resample(G,G.width*A,G.height*A);B.cropWidth=~~(B.cropWidth*A);B.cropHeight=~~(B.cropHeight*A);if(B.boost){B.boost=B.boost.map(function(H){return{x:~~(H.x*A),y:~~(H.y*A),width:~~(H.width*A),height:~~(H.height*A),weight:H.weight}})}}else{A=1}}}return G}).then(function(G){return C.getData(G).then(function(M){var I=c(B,M);var K=I.crops||[I.topCrop];for(var J=0,H=K.length;J<H;J++){var L=K[J];L.x=~~(L.x/A);L.y=~~(L.y/A);L.width=~~(L.width/A);L.height=~~(L.height/A)}if(F){F(I)}return I})})};i.isAvailable=function(z){if(!i.Promise){return false}var B=z?z.canvasFactory:b;if(B===b){var A=document.createElement("canvas");if(!A.getContext("2d")){return false}}return true};function g(D,C){var B=D.data;var z=C.data;var H=D.width;var E=D.height;for(var F=0;F<E;F++){for(var G=0;G<H;G++){var A=(F*H+G)*4;var I;if(G===0||G>=H-1||F===0||F>=E-1){I=s(B,A)}else{I=s(B,A)*4-s(B,A-H*4)-s(B,A-4)-s(B,A+4)-s(B,A+H*4)}z[A+1]=I}}}function n(M,F,C){var B=F.data;var z=C.data;var J=F.width;var G=F.height;for(var H=0;H<G;H++){for(var I=0;I<J;I++){var A=(H*J+I)*4;var K=j(B[A],B[A+1],B[A+2])/255;var L=x(M,B[A],B[A+1],B[A+2]);var E=L>M.skinThreshold;var D=K>=M.skinBrightnessMin&&K<=M.skinBrightnessMax;if(E&&D){z[A]=(L-M.skinThreshold)*(255/(1-M.skinThreshold))}else{z[A]=0}}}}function t(M,E,C){var B=E.data;var z=C.data;var I=E.width;var F=E.height;for(var G=0;G<F;G++){for(var H=0;H<I;H++){var A=(G*I+H)*4;var J=j(B[A],B[A+1],B[A+2])/255;var D=h(B[A],B[A+1],B[A+2]);var K=D>M.saturationThreshold;var L=J>=M.saturationBrightnessMin&&J<=M.saturationBrightnessMax;if(L&&L){z[A+2]=(D-M.saturationThreshold)*(255/(1-M.saturationThreshold))}else{z[A+2]=0}}}}function e(B,A){if(!B.boost){return}var z=A.data;for(var C=0;C<A.width;C+=4){z[C+3]=0}for(C=0;C<B.boost.length;C++){f(B.boost[C],B,A)}}function f(F,L,C){var z=C.data;var K=C.width;var B=~~F.x;var A=~~(F.x+F.width);var J=~~F.y;var I=~~(F.y+F.height);var E=F.weight*255;for(var G=J;G<I;G++){for(var H=B;H<A;H++){var D=(G*K+H)*4;z[D+3]+=E}}}function d(I,z,H){var B=[];var F=o(z,H);var E=I.cropWidth||F;var G=I.cropHeight||F;for(var A=I.maxScale;A>=I.minScale;A-=I.scaleStep){for(var C=0;C+G*A<=H;C+=I.step){for(var D=0;D+E*A<=z;D+=I.step){B.push({x:D,y:C,width:E*A,height:G*A})}}}return B}function r(M,D,I){var N={detail:0,saturation:0,skin:0,boost:0,total:0};var A=D.data;var G=M.scoreDownSample;var F=1/G;var C=D.height*G;var E=D.width*G;var z=D.width;for(var K=0;K<C;K+=G){for(var L=0;L<E;L+=G){var B=(~~(K*F)*z+~~(L*F))*4;var H=m(M,I,L,K);var J=A[B+1]/255;N.skin+=A[B]/255*(J+M.skinBias)*H;N.detail+=J*H;N.saturation+=A[B+2]/255*(J+M.saturationBias)*H;N.boost+=A[B+3]/255*H}}N.total=(N.detail*M.detailWeight+N.skin*M.skinWeight+N.saturation*M.saturationWeight+N.boost*M.boostWeight)/(I.width*I.height);return N}function m(H,z,D,B){if(z.x>D||D>=z.x+z.width||z.y>B||B>=z.y+z.height){return H.outsideImportance}D=(D-z.x)/z.width;B=(B-z.y)/z.height;var E=l(0.5-D)*2;var C=l(0.5-B)*2;var I=Math.max(E-1+H.edgeRadius,0);var F=Math.max(C-1+H.edgeRadius,0);var A=(I*I+F*F)*H.edgeWeight;var G=1.41-y(E*E+C*C);if(H.ruleOfThirds){G+=(Math.max(0,G+A+0.5)*1.2)*(p(E)+p(C))}return G+A}i.importance=m;function x(H,z,B,E){var A=y(z*z+B*B+E*E);var G=(z/A-H.skinColor[0]);var F=(B/A-H.skinColor[1]);var C=(E/A-H.skinColor[2]);var D=y(G*G+F*F+C*C);return 1-D}function c(I,G){var J={};var B=new k(G.width,G.height);g(G,B);n(I,G,B);t(I,G,B);e(I,B);var C=v(B,I.scoreDownSample);var F=-Infinity;var z=null;var H=d(I,G.width,G.height);for(var D=0,A=H.length;D<A;D++){var E=H[D];E.score=r(I,C,E);if(E.score.total>F){z=E;F=E.score.total}}J.topCrop=z;if(I.debug&&z){J.crops=H;J.debugOutput=B;J.debugOptions=I;J.debugTopCrop=u({},J.topCrop)}return J}function k(A,z,B){this.width=A;this.height=z;if(B){this.data=new Uint8ClampedArray(B)}else{this.data=new Uint8ClampedArray(A*z*4)}}i.ImgData=k;function v(F,K){var P=F.data;var H=F.width;var L=Math.floor(F.width/K);var J=Math.floor(F.height/K);var B=new k(L,J);var U=B.data;var A=1/(K*K);for(var C=0;C<J;C++){for(var D=0;D<L;D++){var O=(C*L+D)*4;var I=0;var Q=0;var S=0;var T=0;var M=0;var R=0;var z=0;for(var E=0;E<K;E++){for(var G=0;G<K;G++){var N=((C*K+E)*H+(D*K+G))*4;I+=P[N];Q+=P[N+1];S+=P[N+2];T+=P[N+3];M=Math.max(M,P[N]);R=Math.max(R,P[N+1]);z=Math.max(z,P[N+2])}}U[O]=I*A*0.5+M*0.5;U[O+1]=Q*A*0.7+R*0.3;U[O+2]=S*A;U[O+3]=T*A}}return B}i._downSample=v;function b(z,A){var B=document.createElement("canvas");B.width=z;B.height=A;return B}function w(z){return{open:function(D){var B=D.naturalWidth||D.width;var C=D.naturalHeight||D.height;var E=z(B,C);var A=E.getContext("2d");if(D.naturalWidth&&(D.naturalWidth!=D.width||D.naturalHeight!=D.height)){E.width=D.naturalWidth;E.height=D.naturalHeight}else{E.width=D.width;E.height=D.height}A.drawImage(D,0,0);return i.Promise.resolve(E)},resample:function(C,B,A){return Promise.resolve(C).then(function(E){var F=z(~~B,~~A);var D=F.getContext("2d");D.drawImage(E,0,0,E.width,E.height,0,0,F.width,F.height);return i.Promise.resolve(F)})},getData:function(A){return Promise.resolve(A).then(function(D){var B=D.getContext("2d");var C=B.getImageData(0,0,D.width,D.height);return new k(D.width,D.height,C.data)})}}}i._canvasImageOperations=w;var o=Math.min;var q=Math.max;var l=Math.abs;var a=Math.ceil;var y=Math.sqrt;function u(D){for(var C=1,A=arguments.length;C<A;C++){var z=arguments[C];if(z){for(var B in z){D[B]=z[B]}}}return D}function p(z){z=((z-(1/3)+1)%2*0.5-0.5)*16;return Math.max(1-z*z,0)}function j(B,A,z){return 0.5126*z+0.7152*A+0.0722*B}function s(A,z){return j(A[z],A[z+1],A[z+2])}function h(D,C,z){var F=q(D/255,C/255,z/255);var B=o(D/255,C/255,z/255);if(F===B){return 0}var A=(F+B)/2;var E=F-B;return A>0.5?E/(2-F-B):E/(F+B)}if(typeof define!=="undefined"&&define.amd){define(function(){return i})}if(typeof exports!=="undefined"){exports.smartcrop=i}else{if(typeof navigator!=="undefined"){window.SmartCrop=window.smartcrop=i}}if(typeof module!=="undefined"){module.exports=i}})();(function(view){"use strict";var Uint8Array=view.Uint8Array,HTMLCanvasElement=view.HTMLCanvasElement,canvas_proto=HTMLCanvasElement&&HTMLCanvasElement.prototype,is_base64_regex=/\s*;\s*base64\s*(?:;|$)/i,to_data_url="toDataURL",base64_ranks,decode_base64=function(base64){var len=base64.length,buffer=new Uint8Array(len/4*3|0),i=0,outptr=0,last=[0,0],state=0,save=0,rank,code,undef;while(len--){code=base64.charCodeAt(i++);rank=base64_ranks[code-43];if(rank!==255&&rank!==undef){last[1]=last[0];last[0]=code;save=(save<<6)|rank;state++;if(state===4){buffer[outptr++]=save>>>16;if(last[1]!==61){buffer[outptr++]=save>>>8}if(last[0]!==61){buffer[outptr++]=save}state=0}}}return buffer};if(Uint8Array){base64_ranks=new Uint8Array([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])}if(HTMLCanvasElement&&!canvas_proto.toBlob){canvas_proto.toBlob=function(callback,type){if(!type){type="image/png"}if(this.mozGetAsFile){callback(this.mozGetAsFile("canvas",type));return}if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(type)){callback(this.msToBlob());return}var args=Array.prototype.slice.call(arguments,1),dataURI=this[to_data_url].apply(this,args),header_end=dataURI.indexOf(","),data=dataURI.substring(header_end+1),is_base64=is_base64_regex.test(dataURI.substring(0,header_end)),blob;if(Blob.fake){blob=new Blob;if(is_base64){blob.encoding="base64"}else{blob.encoding="URI"}blob.data=data;blob.size=data.length}else if(Uint8Array){if(is_base64){blob=new Blob([decode_base64(data)],{type:type})}else{blob=new Blob([decodeURIComponent(data)],{type:type})}}callback(blob)};if(canvas_proto.toDataURLHD){canvas_proto.toBlobHD=function(){to_data_url="toDataURLHD";var blob=this.toBlob();to_data_url="toDataURL";return blob}}else{canvas_proto.toBlobHD=canvas_proto.toBlob}}}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content||this));var saveAs=saveAs||function(view){"use strict";if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,click=function(node){var event=new MouseEvent("click");node.dispatchEvent(event)},is_safari=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),webkit_req_fs=view.webkitRequestFileSystem,req_fs=view.requestFileSystem||webkit_req_fs||view.mozRequestFileSystem,throw_outside=function(ex){(view.setImmediate||view.setTimeout)(function(){throw ex},0)},force_saveable_type="application/octet-stream",fs_min_size=0,arbitrary_revoke_timeout=500,revoke=function(file){var revoker=function(){if(typeof file==="string"){get_URL().revokeObjectURL(file)}else{file.remove()}};if(view.chrome){revoker()}else{setTimeout(revoker,arbitrary_revoke_timeout)}},dispatch=function(filesaver,event_types,event){event_types=[].concat(event_types);var i=event_types.length;while(i--){var listener=filesaver["on"+event_types[i]];if(typeof listener==="function"){try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}}},auto_bom=function(blob){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)){return new Blob(["\ufeff",blob],{type:blob.type})}return blob},FileSaver=function(blob,name,no_auto_bom){if(!no_auto_bom){blob=auto_bom(blob)}var filesaver=this,type=blob.type,blob_changed=false,object_url,target_view,dispatch_all=function(){dispatch(filesaver,"writestart progress write writeend".split(" "))},fs_error=function(){if(target_view&&is_safari&&typeof FileReader!=="undefined"){var reader=new FileReader;reader.onloadend=function(){var base64Data=reader.result;target_view.location.href="data:attachment/file"+base64Data.slice(base64Data.search(/[,;]/));filesaver.readyState=filesaver.DONE;dispatch_all()};reader.readAsDataURL(blob);filesaver.readyState=filesaver.INIT;return}if(blob_changed||!object_url){object_url=get_URL().createObjectURL(blob)}if(target_view){target_view.location.href=object_url}else{var new_tab=view.open(object_url,"_blank");if(new_tab==undefined&&is_safari){view.location.href=object_url}}filesaver.readyState=filesaver.DONE;dispatch_all();revoke(object_url)},abortable=function(func){return function(){if(filesaver.readyState!==filesaver.DONE){return func.apply(this,arguments)}}},create_if_not_found={create:true,exclusive:false},slice;filesaver.readyState=filesaver.INIT;if(!name){name="download"}if(can_use_save_link){object_url=get_URL().createObjectURL(blob);setTimeout(function(){save_link.href=object_url;save_link.download=name;click(save_link);dispatch_all();revoke(object_url);filesaver.readyState=filesaver.DONE});return}if(view.chrome&&type&&type!==force_saveable_type){slice=blob.slice||blob.webkitSlice;blob=slice.call(blob,0,blob.size,force_saveable_type);blob_changed=true}if(webkit_req_fs&&name!=="download"){name+=".download"}if(type===force_saveable_type||webkit_req_fs){target_view=view}if(!req_fs){fs_error();return}fs_min_size+=blob.size;req_fs(view.TEMPORARY,fs_min_size,abortable(function(fs){fs.root.getDirectory("saved",create_if_not_found,abortable(function(dir){var save=function(){dir.getFile(name,create_if_not_found,abortable(function(file){file.createWriter(abortable(function(writer){writer.onwriteend=function(event){target_view.location.href=file.toURL();filesaver.readyState=filesaver.DONE;dispatch(filesaver,"writeend",event);revoke(file)};writer.onerror=function(){var error=writer.error;if(error.code!==error.ABORT_ERR){fs_error()}};"writestart progress write abort".split(" ").forEach(function(event){writer["on"+event]=filesaver["on"+event]});writer.write(blob);filesaver.abort=function(){writer.abort();filesaver.readyState=filesaver.DONE};filesaver.readyState=filesaver.WRITING}),fs_error)}),fs_error)};dir.getFile(name,{create:false},abortable(function(file){file.remove();save()}),abortable(function(ex){if(ex.code===ex.NOT_FOUND_ERR){save()}else{fs_error()}}))}),fs_error)}),fs_error)},FS_proto=FileSaver.prototype,saveAs=function(blob,name,no_auto_bom){return new FileSaver(blob,name,no_auto_bom)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(blob,name,no_auto_bom){if(!no_auto_bom){blob=auto_bom(blob)}return navigator.msSaveOrOpenBlob(blob,name||"download")}}FS_proto.abort=function(){var filesaver=this;filesaver.readyState=filesaver.DONE;dispatch(filesaver,"abort")};FS_proto.readyState=FS_proto.INIT=0;FS_proto.WRITING=1;FS_proto.DONE=2;FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null;return saveAs}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=saveAs}else if(typeof define!=="undefined"&&define!==null&&define.amd!=null){define([],function(){return saveAs})}
function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.LazyLoad=e()}(this,function(){"use strict";var t="undefined"!=typeof window,e=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),n=t&&"IntersectionObserver"in window,r=t&&"classList"in document.createElement("p"),o={elements_selector:"img",container:e||t?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_poster:"poster",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_reveal:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},a=function(t,e){var n,r=new t(e);try{n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:r}})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:r})}window.dispatchEvent(n)};var i=function(t,e){return t.getAttribute("data-"+e)},s=function(t,e,n){var r="data-"+e;null!==n?t.setAttribute(r,n):t.removeAttribute(r)},c=function(t){return"true"===i(t,"was-processed")},l=function(t,e){return s(t,"ll-timeout",e)},u=function(t){return i(t,"ll-timeout")},d=function(t,e,n,r){t&&(void 0===r?void 0===n?t(e):t(e,n):t(e,n,r))},f=function(t,e){t.loadingCount+=e,0===t._elements.length&&0===t.loadingCount&&d(t._settings.callback_finish,t)},_=function(t){for(var e,n=[],r=0;e=t.children[r];r+=1)"SOURCE"===e.tagName&&n.push(e);return n},v=function(t,e,n){n&&t.setAttribute(e,n)},b=function(t,e){v(t,"sizes",i(t,e.data_sizes)),v(t,"srcset",i(t,e.data_srcset)),v(t,"src",i(t,e.data_src))},m={IMG:function(t,e){var n=t.parentNode;n&&"PICTURE"===n.tagName&&_(n).forEach(function(t){b(t,e)});b(t,e)},IFRAME:function(t,e){v(t,"src",i(t,e.data_src))},VIDEO:function(t,e){_(t).forEach(function(t){v(t,"src",i(t,e.data_src))}),v(t,"poster",i(t,e.data_poster)),v(t,"src",i(t,e.data_src)),t.load()}},p=function(t,e){var n,r,o=e._settings,a=t.tagName,s=m[a];if(s)return s(t,o),f(e,1),void(e._elements=(n=e._elements,r=t,n.filter(function(t){return t!==r})));!function(t,e){var n=i(t,e.data_src),r=i(t,e.data_bg);n&&(t.style.backgroundImage='url("'.concat(n,'")')),r&&(t.style.backgroundImage=r)}(t,o)},g=function(t,e){r?t.classList.add(e):t.className+=(t.className?" ":"")+e},y=function(t,e){r?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},h=function(t,e,n){t.addEventListener(e,n)},E=function(t,e,n){t.removeEventListener(e,n)},w=function(t,e,n){E(t,"load",e),E(t,"loadeddata",e),E(t,"error",n)},A=function(t,e,n){var r=n._settings,o=e?r.class_loaded:r.class_error,a=e?r.callback_loaded:r.callback_error,i=t.target;y(i,r.class_loading),g(i,o),d(a,i,n),f(n,-1)},I=function(t,e){var n=function n(o){A(o,!0,e),w(t,n,r)},r=function r(o){A(o,!1,e),w(t,n,r)};!function(t,e,n){h(t,"load",e),h(t,"loadeddata",e),h(t,"error",n)}(t,n,r)},k=["IMG","IFRAME","VIDEO"],L=function(t,e){var n=e._observer;S(t,e),n&&e._settings.auto_unobserve&&n.unobserve(t)},O=function(t){var e=u(t);e&&(clearTimeout(e),l(t,null))},x=function(t,e){var n=e._settings.load_delay,r=u(t);r||(r=setTimeout(function(){L(t,e),O(t)},n),l(t,r))},S=function(t,e,n){var r=e._settings;!n&&c(t)||(k.indexOf(t.tagName)>-1&&(I(t,e),g(t,r.class_loading)),p(t,e),function(t){s(t,"was-processed","true")}(t),d(r.callback_reveal,t,e),d(r.callback_set,t,e))},z=function(t){return!!n&&(t._observer=new IntersectionObserver(function(e){e.forEach(function(e){return function(t){return t.isIntersecting||t.intersectionRatio>0}(e)?function(t,e,n){var r=n._settings;d(r.callback_enter,t,e,n),r.load_delay?x(t,n):L(t,n)}(e.target,e,t):function(t,e,n){var r=n._settings;d(r.callback_exit,t,e,n),r.load_delay&&O(t)}(e.target,e,t)})},{root:(e=t._settings).container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}),!0);var e},C=["IMG","IFRAME"],N=function(t,e){return function(t){return t.filter(function(t){return!c(t)})}((n=t||function(t){return t.container.querySelectorAll(t.elements_selector)}(e),Array.prototype.slice.call(n)));var n},M=function(t){var e=t._settings;_toConsumableArray(e.container.querySelectorAll("."+e.class_error)).forEach(function(t){y(t,e.class_error),function(t){s(t,"was-processed",null)}(t)}),t.update()},R=function(e,n){var r;this._settings=function(t){return _extends({},o,t)}(e),this.loadingCount=0,z(this),this.update(n),r=this,t&&window.addEventListener("online",function(t){M(r)})};return R.prototype={update:function(t){var n,r=this,o=this._settings;(this._elements=N(t,o),!e&&this._observer)?(function(t){return t.use_native&&"loading"in HTMLImageElement.prototype}(o)&&((n=this)._elements.forEach(function(t){-1!==C.indexOf(t.tagName)&&(t.setAttribute("loading","lazy"),S(t,n))}),this._elements=N(t,o)),this._elements.forEach(function(t){r._observer.observe(t)})):this.loadAll()},destroy:function(){var t=this;this._observer&&(this._elements.forEach(function(e){t._observer.unobserve(e)}),this._observer=null),this._elements=null,this._settings=null},load:function(t,e){S(t,this,e)},loadAll:function(){var t=this;this._elements.forEach(function(e){L(e,t)})}},t&&function(t,e){if(e)if(e.length)for(var n,r=0;n=e[r];r+=1)a(t,n);else a(t,e)}(R,window.lazyLoadOptions),R});function setCookie(name,value,years){var expires="";if(years){var date=new Date();date.setTime(date.getTime()+(years*365*24*60*60*1000));expires="; expires="+date.toUTCString();}
document.cookie=name+"="+(value||"")+expires+"; path=/";}
function getCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;}
if(typeof window.orientation!=='undefined'){g('ginput').addEventListener('focus',function(){g('gsearch').style.left='0px';});g('ginput').addEventListener('blur',function(){g('gsearch').style.left='165px';})}
if(has_dom('cur_screen')){var ratio=window.devicePixelRatio||1;var res=Math.round(window.screen.width*ratio)+'x'+Math.round(window.screen.height*ratio);g('cur_screen').innerHTML=res;g('screen_btn').href+='/'+res;}
function custom_resize(){var cwidth=g('cwidth').value;var cheight=g('cheight').value;if(cwidth>0&&cheight>0){location.href=location.href+'/download/'+Math.round(cwidth)+'x'+Math.round(cheight);}}
function has_dom(id){var element=document.getElementById(id);return typeof(element)!='undefined'&&element!=null;}
function g(d){return document.getElementById(d);}
function reflex(){new flexImages({selector:'.flex-images',rowHeight:310});}
if(g('mainlist'))
{var lazyLoadInstance=new LazyLoad({elements_selector:".lazy"});}
g('flow')&&reflex();g('scrolltop')&&g('scrolltop').addEventListener('click',function(){window.scrollTo({top:0,behavior:'smooth'});});var h=window.innerHeight||window.screen.height;if(has_dom('load_more')){g('load_more').onclick=function(){var _t=this;g('load_more').disabled=true;ajax_data(_t.dataset.url+'?mod='+_t.dataset.mod+'&page='+_t.dataset.page,function(data){if(data.indexOf('<li')>-1){if(g('mainlist'))
{g('mainlist').insertAdjacentHTML('beforeend',data);waterFall();}else{g('flow').insertAdjacentHTML('beforeend',data);reflex();}
_t.dataset.page++;g('load_more').disabled=false;}else{document.getElementById('load_more').parentNode.removeChild(document.getElementById('load_more'));}});}
window.onscroll=function(){var bodyHeight=document.documentElement.offsetHeight;var windowHeight=document.documentElement.clientHeight;var srcollTop=document.documentElement.scrollTop||document.body.scrollTop;var srcollH=document.body.scrollHeight;if(g('load_more')&&srcollTop+windowHeight>=srcollH-h){g('load_more').click();};}}
function ajax_data(location,callback){var xmlhttp;try{xmlhttp=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");}catch(e){return;}
xmlhttp.onreadystatechange=function(){if((xmlhttp.readyState===4)&&(xmlhttp.status===200)){callback(xmlhttp.responseText);}};xmlhttp.open("GET",location,true);xmlhttp.setRequestHeader('X-Requested-With','XMLHttpRequest');xmlhttp.send(null);};function custom_resize()
{crop(parseInt(g('cwidth').value),parseInt(g('cheight').value));}
Element.prototype.remove=function(){this.parentElement.removeChild(this);}
NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var i=this.length-1;i>=0;i--){if(this[i]&&this[i].parentElement){this[i].parentElement.removeChild(this[i]);}}}
if(g('preview_url'))
{grecaptcha.ready(function(){grecaptcha.execute('6Ldg0eMUAAAAAP7D8V5xt3S9T4NraVOnS8eYokJD',{action:'download'}).then(function(token){var xmlhttp=new XMLHttpRequest();xmlhttp.open("POST",site+"/captcha",true);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.send("token="+token+"&code="+document.getElementById('code').value);xmlhttp.onreadystatechange=function()
{if(xmlhttp.readyState==4&&xmlhttp.status==200)
{var original=document.getElementById('preview_url').value.replace('-preview.jpg','-'+xmlhttp.responseText+'.jpg').replace('p4.wallpaperbetter.com','r4.wallpaperbetter.com');var regex=/download\/(\d+)x(\d+)/.exec(location.href);if(regex!=null){if(regex[1]>0&&regex[2]>0){croppic(regex[1],regex[2],original);}}else{forceDownload('wallpaperbetter.jpg',original);}}}})});}
function forceDownload(fileName,url){var xhr=new XMLHttpRequest();xhr.open("GET",url,true);xhr.responseType="blob";xhr.onload=function(){g('download_loader').classList.add('downloaded');var urlCreator=window.URL||window.webkitURL;var imageUrl=urlCreator.createObjectURL(this.response);var tag=document.createElement('a');tag.href=imageUrl;tag.download=fileName;document.body.appendChild(tag);tag.click();document.body.removeChild(tag);}
xhr.send();}
var clicked=false;function crop(width,height){var aid=location.href.split('-').pop();if(!clicked)
{clicked=true;g('loader').style.display='block';var dimension=width+'x'+height;var filename='wallpaperbetter.com_'+dimension+'.jpg';var img=new Image();img.crossOrigin='anonymous';img.src=g('raw').href;img.onload=function(){clicked=false;var original=[img.naturalWidth,img.naturalHeight];var ratio=original[0]/original[1];var _t_size=dimension.split('x');var _t_ratio=_t_size[0]/_t_size[1];var canvas=document.createElement('canvas');var ctx=canvas.getContext("2d");canvas.setAttribute('width',_t_size[0]);canvas.setAttribute('height',_t_size[1]);g('loader').style.display='none';if(getCookie('downid')!=aid)
{ajax_data(site+'/counter?id='+aid,function(data){});setCookie('downid',aid,3);}
if(_t_ratio==ratio){ctx.drawImage(img,0,0,original[0],original[1],0,0,_t_size[0],_t_size[1]);canvas.toBlob(function(blob){saveAs(blob,filename,"image/jpeg");},"image/jpeg",1);}else if(_t_ratio<ratio){SmartCrop.crop(img,{width:_t_size[0],height:_t_size[1],minScale:1},function(result){ctx.drawImage(img,result.topCrop.x,result.topCrop.y,_t_size[0]*original[1]/_t_size[1],original[1],0,0,_t_size[0],_t_size[1]);canvas.toBlob(function(blob){saveAs(blob,filename,"image/jpeg");},"image/jpeg",1);})}else if(_t_ratio>ratio){SmartCrop.crop(img,{width:_t_size[0],height:_t_size[1],minScale:1},function(result){ctx.drawImage(img,result.topCrop.x,result.topCrop.y,original[0],_t_size[1]*original[0]/_t_size[0],0,0,_t_size[0],_t_size[1]);canvas.toBlob(function(blob){saveAs(blob,filename,"image/jpeg");},"image/jpeg",1);})}}}}
function croppic(width,height,url){var aid=location.href.split('-').pop().split('/')[0];var dimension=width+'x'+height;var filename='wallpaperbetter.com_'+dimension+'.jpg';var img=new Image();img.crossOrigin='anonymous';img.src=url;img.onload=function(){clicked=false;var original=[img.naturalWidth,img.naturalHeight];var ratio=original[0]/original[1];var _t_size=dimension.split('x');var _t_ratio=_t_size[0]/_t_size[1];var canvas=document.createElement('canvas');var ctx=canvas.getContext("2d");canvas.setAttribute('width',_t_size[0]);canvas.setAttribute('height',_t_size[1]);g('download_loader').classList.add('downloaded');if(getCookie('downid')!=aid)
{ajax_data(site+'/counter?id='+aid,function(data){});setCookie('downid',aid,3);}
if(_t_ratio==ratio){ctx.drawImage(img,0,0,original[0],original[1],0,0,_t_size[0],_t_size[1]);canvas.toBlob(function(blob){saveAs(blob,filename,"image/jpeg");},"image/jpeg",1);}else if(_t_ratio<ratio){SmartCrop.crop(img,{width:_t_size[0],height:_t_size[1],minScale:1},function(result){ctx.drawImage(img,result.topCrop.x,result.topCrop.y,_t_size[0]*original[1]/_t_size[1],original[1],0,0,_t_size[0],_t_size[1]);canvas.toBlob(function(blob){saveAs(blob,filename,"image/jpeg");},"image/jpeg",1);})}else if(_t_ratio>ratio){SmartCrop.crop(img,{width:_t_size[0],height:_t_size[1],minScale:1},function(result){ctx.drawImage(img,result.topCrop.x,result.topCrop.y,original[0],_t_size[1]*original[0]/_t_size[0],0,0,_t_size[0],_t_size[1]);canvas.toBlob(function(blob){saveAs(blob,filename,"image/jpeg");},"image/jpeg",1);})}}}
function waterFall(boxid='mainlist',gap=20,itemWidth=338){var box=document.getElementById(boxid);if(box)
{var items=box.children;var pageWidth=getClient().width;var columns=parseInt(pageWidth/(itemWidth+gap));var itemCount=items.length;if(columns>1)
{box.style.width=(columns*itemWidth+gap*(columns-1))+'px';var arr=[];for(var i=0;i<itemCount;i++){items[i].style.position='absolute';items[i].style.marginLeft='0px';items[i].style.marginTop='0px';items[i].style.marginRight='0px';items[i].style.marginBottom='0px';if(i<columns){items[i].style.top=0;items[i].style.left=(itemWidth+gap)*i+'px';arr.push(items[i].offsetHeight);}else{var minHeight=arr[0];var index=0;for(var j=0;j<arr.length;j++){if(minHeight>arr[j]){minHeight=arr[j];index=j;}}
items[i].style.top=arr[index]+gap+'px';items[i].style.left=items[index].offsetLeft+'px';arr[index]=arr[index]+items[i].offsetHeight+gap;}}
box.style.height=(Math.max.apply(Math,arr)+30)+'px';}else{for(var i=0;i<itemCount;i++){items[i].style.position='static';items[i].style.width='100%';items[i].style.marginBottom='24px';items[i].style.marginLeft='0px';}}}}
function getClient(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}
function getScrollTop(){return window.pageYOffset||document.documentElement.scrollTop;}
if(document.getElementById('mainlist')){window.onresize=function(){waterFall();};window.onload=function(){waterFall();};var page=1;waterFall();}